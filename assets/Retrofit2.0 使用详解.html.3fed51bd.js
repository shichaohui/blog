import{_ as o,o as p,c,b as n,d as a,e,a as t,r as i}from"./app.81ed69ec.js";const l={},u={href:"https://github.com/square/retrofit",target:"_blank",rel:"noopener noreferrer"},r={href:"http://square.github.io/retrofit/",target:"_blank",rel:"noopener noreferrer"},d=n("h2",{id:"\u7B80\u4ECB",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7B80\u4ECB","aria-hidden":"true"},"#"),a(" \u7B80\u4ECB")],-1),k=n("code",null,"Retrofit",-1),v={href:"https://github.com/square",target:"_blank",rel:"noopener noreferrer"},m=n("code",null,"Android",-1),h=n("code",null,"Java",-1),g=n("code",null,"Http",-1),b={href:"https://github.com/square/okhttp",target:"_blank",rel:"noopener noreferrer"},f={href:"http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0915/3460.html",target:"_blank",rel:"noopener noreferrer"},_=n("h2",{id:"\u4F7F\u7528-retrofit2-0",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u4F7F\u7528-retrofit2-0","aria-hidden":"true"},"#"),a(" \u4F7F\u7528 Retrofit2.0")],-1),q={href:"http://repo1.maven.org/maven2/com/squareup/retrofit/retrofit/2.0.0-beta2/retrofit-2.0.0-beta2.jar",target:"_blank",rel:"noopener noreferrer"},x=t(`<h3 id="gradle" tabindex="-1"><a class="header-anchor" href="#gradle" aria-hidden="true">#</a> Gradle :</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>compile &#39;com.squareup.retrofit:retrofit:2.0.0-beta2&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="maven" tabindex="-1"><a class="header-anchor" href="#maven" aria-hidden="true">#</a> Maven :</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;dependency&gt;
  &lt;groupId&gt;com.squareup.retrofit&lt;/groupId&gt;
  &lt;artifactId&gt;retrofit&lt;/artifactId&gt;
  &lt;version&gt;2.0.0-beta2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7528\u6CD5\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#\u7528\u6CD5\u4ECB\u7ECD" aria-hidden="true">#</a> \u7528\u6CD5\u4ECB\u7ECD</h2><p>\u8F6C\u6362 <code>HTTP API</code> \u4E3A <code>Java</code> \u63A5\u53E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">GitHubService</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@GET</span><span class="token punctuation">(</span><span class="token string">&quot;users/{user}/repos&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">Call</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Repo</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">listRepos</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Path</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u7C7B <code>Retrofit</code> \u751F\u6210\u63A5\u53E3 <code>GitHubService</code> \u7684\u5B9E\u73B0</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Retrofit</span> retrofit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Retrofit<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://api.github.com/&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">GitHubService</span> service <span class="token operator">=</span> retrofit<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">GitHubService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E4B\u540E\u5C31\u53EF\u4EE5\u76F4\u63A5\u8C03\u7528\u751F\u6210\u7684 <code>GitHubServcie</code> \u5B9E\u4F8B\u53BB\u53D1\u9001\u540C\u6B65\u6216\u5F02\u6B65\u7684\u8BF7\u6C42\u7ED9Web\u670D\u52A1\u5668</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Call</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Repo</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> repos <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">listRepos</span><span class="token punctuation">(</span><span class="token string">&quot;octocat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>baseUrl</code> \u548C\u6CE8\u89E3\u4E2D <code>url</code> \u8FDE\u63A5\u7684 <code>/</code> \u6700\u597D\u5199\u5728 <code>baseUrl</code> \u7684\u540E\u9762\uFF0C\u800C\u4E0D\u662F\u6CE8\u89E3\u4E2D <code>url</code> \u7684\u524D\u9762\uFF0C\u5426\u5219\u53EF\u80FD\u4F1A\u51FA\u73B0\u4E0D\u53EF\u9884\u77E5\u7684\u9519\u8BEF\u3002</p><h2 id="api-\u58F0\u660E" tabindex="-1"><a class="header-anchor" href="#api-\u58F0\u660E" aria-hidden="true">#</a> API \u58F0\u660E</h2><p>\u63A5\u53E3\u51FD\u6570\u7684\u6CE8\u89E3\u548C\u53C2\u6570\u8868\u660E\u5982\u4F55\u53BB\u5904\u7406\u8BF7\u6C42</p><h3 id="\u8BF7\u6C42\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u8BF7\u6C42\u65B9\u6CD5" aria-hidden="true">#</a> \u8BF7\u6C42\u65B9\u6CD5</h3><p>\u6BCF\u4E00\u4E2A\u51FD\u6570\u90FD\u5FC5\u987B\u6709\u63D0\u4F9B\u8BF7\u6C42\u65B9\u5F0F\u548C\u76F8\u5BF9 <code>URL</code> \u7684 <code>Http</code> \u6CE8\u89E3\uFF0C<code>Retrofit</code> \u63D0\u4F9B\u4E86 5 \u79CD\u5185\u7F6E\u7684\u6CE8\u89E3\uFF1A<code>GET</code>\u3001<code>POST</code>\u3001<code>PUT</code>\u3001<code>DELETE</code> \u548C <code>HEAD</code>\uFF0C\u5728\u6CE8\u89E3\u4E2D\u6307\u5B9A\u7684\u8D44\u6E90\u7684\u76F8\u5BF9 <code>URL</code> \u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GET</span><span class="token punctuation">(</span><span class="token string">&quot;users/list&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E5F\u53EF\u4EE5\u5728 <code>URL</code> \u4E2D\u6307\u5B9A\u67E5\u8BE2\u53C2\u6570</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>@GET(&quot;users/list?sort=desc&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="url\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#url\u5904\u7406" aria-hidden="true">#</a> URL\u5904\u7406</h3><p>\u8BF7\u6C42\u7684 <code>URL</code> \u53EF\u4EE5\u5728\u51FD\u6570\u4E2D\u4F7F\u7528\u66FF\u6362\u5757\u548C\u53C2\u6570\u8FDB\u884C\u52A8\u6001\u66F4\u65B0\uFF0C\u66FF\u6362\u5757\u662F <code>{ and }</code> \u5305\u56F4\u7684\u5B57\u6BCD\u6570\u5B57\u7EC4\u6210\u7684\u5B57\u7B26\u4E32\uFF0C\u76F8\u5E94\u7684\u53C2\u6570\u5FC5\u987B\u4F7F\u7528\u76F8\u540C\u7684\u5B57\u7B26\u4E32\u88AB <code>@Path</code> \u8FDB\u884C\u6CE8\u91CA\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GET</span><span class="token punctuation">(</span><span class="token string">&quot;group/{id}/users&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">groupList</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Path</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> groupId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E5F\u53EF\u4EE5\u6DFB\u52A0\u67E5\u8BE2\u53C2\u6570</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GET</span><span class="token punctuation">(</span><span class="token string">&quot;group/{id}/users&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">groupList</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Path</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> groupId<span class="token punctuation">,</span> <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;sort&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> sort<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u590D\u6742\u7684\u67E5\u8BE2\u53C2\u6570\u53EF\u4EE5\u4F7F\u7528 <code>Map</code> \u8FDB\u884C\u7EC4\u5408</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GET</span><span class="token punctuation">(</span><span class="token string">&quot;group/{id}/users&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">groupList</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Path</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> groupId<span class="token punctuation">,</span> <span class="token annotation punctuation">@QueryMap</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u8BF7\u6C42\u4F53" tabindex="-1"><a class="header-anchor" href="#\u8BF7\u6C42\u4F53" aria-hidden="true">#</a> \u8BF7\u6C42\u4F53</h3><p>\u53EF\u4EE5\u901A\u8FC7 <code>@Body</code> \u6CE8\u89E3\u6307\u5B9A\u4E00\u4E2A\u5BF9\u8C61\u4F5C\u4E3A <code>Http</code> \u8BF7\u6C42\u7684\u8BF7\u6C42\u4F53\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@POST</span><span class="token punctuation">(</span><span class="token string">&quot;users/new&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">Call</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Body</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE5\u5BF9\u8C61\u5C06\u4F1A\u88AB <code>Retroofit</code> \u5B9E\u4F8B\u6307\u5B9A\u7684\u8F6C\u6362\u5668\u8F6C\u6362\uFF0C\u5982\u679C\u6CA1\u6709\u6DFB\u52A0\u8F6C\u6362\u5668\uFF0C\u5219\u53EA\u6709 <code>RequestBody</code> \u53EF\u7528\u3002\uFF08\u8F6C\u6362\u5668\u7684\u6DFB\u52A0\u5728\u540E\u9762\u4ECB\u7ECD\uFF09</p><h3 id="form-encoded-\u548C-multipart" tabindex="-1"><a class="header-anchor" href="#form-encoded-\u548C-multipart" aria-hidden="true">#</a> FORM ENCODED \u548C MULTIPART</h3><p>\u51FD\u6570\u4E5F\u53EF\u4EE5\u58F0\u660E\u4E3A\u53D1\u9001 <code>form-encoded</code> \u548C <code>multipart</code> \u6570\u636E\u3002</p><p>\u5F53\u51FD\u6570\u6709 <code>@FormUrlEncoded</code> \u6CE8\u89E3\u7684\u65F6\u5019\uFF0C\u5C06\u4F1A\u53D1\u9001 <code>form-encoded</code> \u6570\u636E\uFF0C\u6BCF\u4E2A\u952E-\u503C\u5BF9\u90FD\u8981\u88AB\u542B\u6709\u540D\u5B57\u7684 <code>@Field</code> \u6CE8\u89E3\u548C\u63D0\u4F9B\u503C\u7684\u5BF9\u8C61\u6240\u6807\u6CE8\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@FormUrlEncoded</span>
<span class="token annotation punctuation">@POST</span><span class="token punctuation">(</span><span class="token string">&quot;user/edit&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">Call</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Field</span><span class="token punctuation">(</span><span class="token string">&quot;first_name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> first<span class="token punctuation">,</span> <span class="token annotation punctuation">@Field</span><span class="token punctuation">(</span><span class="token string">&quot;last_name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> last<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u51FD\u6570\u6709 <code>@Multipart</code> \u6CE8\u89E3\u7684\u65F6\u5019\uFF0C\u5C06\u4F1A\u53D1\u9001 <code>multipart</code> \u6570\u636E\uFF0CParts\u90FD\u4F7F\u7528 <code>@Part</code> \u6CE8\u89E3\u8FDB\u884C\u58F0\u660E\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Multipart</span>
<span class="token annotation punctuation">@PUT</span><span class="token punctuation">(</span><span class="token string">&quot;user/photo&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">Call</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Part</span><span class="token punctuation">(</span><span class="token string">&quot;photo&quot;</span><span class="token punctuation">)</span> <span class="token class-name">RequestBody</span> photo<span class="token punctuation">,</span> <span class="token annotation punctuation">@Part</span><span class="token punctuation">(</span><span class="token string">&quot;description&quot;</span><span class="token punctuation">)</span> <span class="token class-name">RequestBody</span> description<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Multipart</code> <code>parts</code> \u8981\u4F7F\u7528 <code>Retrofit</code> \u7684\u4F17\u591A\u8F6C\u6362\u5668\u4E4B\u4E00\u6216\u8005\u5B9E\u73B0 <code>RequestBody</code> \u6765\u5904\u7406\u81EA\u5DF1\u7684\u5E8F\u5217\u5316\u3002</p><h3 id="header\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#header\u5904\u7406" aria-hidden="true">#</a> Header\u5904\u7406</h3><p>\u53EF\u4EE5\u4F7F\u7528 <code>@Headers</code> \u6CE8\u89E3\u7ED9\u51FD\u6570\u8BBE\u7F6E\u9759\u6001\u7684 <code>header</code>\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Headers</span><span class="token punctuation">(</span><span class="token string">&quot;Cache-Control: max-age=640000&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@GET</span><span class="token punctuation">(</span><span class="token string">&quot;widget/list&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">Call</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">widgetList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Headers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">&quot;Accept: application/vnd.github.v3.full+json&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;User-Agent: Retrofit-Sample-App&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@GET</span><span class="token punctuation">(</span><span class="token string">&quot;users/{username}&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">Call</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Path</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF1A<code>header</code> \u4E0D\u80FD\u88AB\u4E92\u76F8\u8986\u76D6\u3002\u6240\u6709\u5177\u6709\u76F8\u540C\u540D\u5B57\u7684 <code>header</code> \u5C06\u4F1A\u88AB\u5305\u542B\u5230\u8BF7\u6C42\u4E2D\u3002</p><p>\u53EF\u4EE5\u4F7F\u7528 <code>@Header</code> \u6CE8\u89E3\u52A8\u6001\u7684\u66F4\u65B0\u4E00\u4E2A\u8BF7\u6C42\u7684 <code>header</code>\u3002\u5FC5\u987B\u7ED9 <code>@Header</code> \u63D0\u4F9B\u76F8\u5E94\u7684\u53C2\u6570\uFF0C\u5982\u679C\u53C2\u6570\u7684\u503C\u4E3A\u7A7A <code>header</code> \u5C06\u4F1A\u88AB\u5FFD\u7565\uFF0C\u5426\u5219\u5C31\u8C03\u7528\u53C2\u6570\u503C\u7684 <code>toString()</code> \u65B9\u6CD5\u5E76\u4F7F\u7528\u8FD4\u56DE\u7ED3\u679C\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GET</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">Call</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Header</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> authorization<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,44),R={href:"https://github.com/square/okhttp/wiki/Interceptors",target:"_blank",rel:"noopener noreferrer"},j=n("code",null,"header",-1),y=n("code",null,"Http",-1),w=t(`<div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">OkHttpClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OkHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">networkInterceptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Interceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>squareup<span class="token punctuation">.</span>okhttp<span class="token punctuation">.</span></span>Response</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Chain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

        <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>squareup<span class="token punctuation">.</span>okhttp<span class="token punctuation">.</span></span>Response</span> response <span class="token operator">=</span> chain<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span>chain<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Do anything with response here</span>

        <span class="token keyword">return</span> response<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Retrofit</span> retrofit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Retrofit<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span>BASE_URL<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">.</span><span class="token function">client</span><span class="token punctuation">(</span>client<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u540C\u6B65-vs-\u5F02\u6B65" tabindex="-1"><a class="header-anchor" href="#\u540C\u6B65-vs-\u5F02\u6B65" aria-hidden="true">#</a> \u540C\u6B65 VS \u5F02\u6B65</h3><p>\u6BCF\u4E00\u4E2A <code>Call</code> \u5B9E\u4F8B\u53EF\u4EE5\u540C\u6B65\uFF08<code>call.excute()</code>\uFF09\u6216\u8005\u5F02\u6B65\uFF08<code>call.enquene(CallBack&lt;?&gt; callBack</code>\uFF09\u7684\u88AB\u6267\u884C\uFF0C\u6BCF\u4E00\u4E2A\u5B9E\u4F8B\u4EC5\u4EC5\u80FD\u591F\u88AB\u4F7F\u7528\u4E00\u6B21\uFF0C\u4F46\u662F\u53EF\u4EE5\u901A\u8FC7 <code>clone()</code> \u51FD\u6570\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u53EF\u7528\u7684\u5B9E\u4F8B\u3002</p><p>\u4E5F\u53EF\u4EE5\u4F7F\u7528 <code>CallBack</code> \u5B9A\u4E49\u4E00\u4E2A\u5F02\u6B65\u65B9\u6CD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GET</span><span class="token punctuation">(</span><span class="token string">&quot;user/{id}/photo&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">getUserPhoto</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Path</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token class-name">Callback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Photo</span><span class="token punctuation">&gt;</span></span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728 <code>Android</code> \u4E0A\uFF0C\u56DE\u8C03\u88AB\u6267\u884C\u5728\u4E3B\u7EBF\u7A0B\uFF1B\u5728 <code>JVM</code> \u4E0A\uFF0C\u56DE\u8C03\u88AB\u6267\u884C\u5728\u53D1\u9001 <code>Http</code> \u8BF7\u6C42\u7684\u7EBF\u7A0B\u3002</p><h2 id="retrofit-\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#retrofit-\u914D\u7F6E" aria-hidden="true">#</a> Retrofit \u914D\u7F6E</h2><p><code>Retrofit</code> \u662F\u901A\u8FC7 <code>API</code> \u63A5\u53E3\u8F6C\u6362\u6210\u7684\u53EF\u8C03\u7528\u7684\u5BF9\u8C61\uFF0C\u9ED8\u8BA4\u6709\u4E00\u4E9B\u5408\u7406\u7684\u914D\u7F6E\uFF0C\u8FD9\u4E9B\u914D\u7F6E\u4E5F\u53EF\u4EE5\u8FDB\u884C\u5B9A\u5236\u3002</p><h3 id="\u8F6C\u6362\u5668" tabindex="-1"><a class="header-anchor" href="#\u8F6C\u6362\u5668" aria-hidden="true">#</a> \u8F6C\u6362\u5668</h3><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C<code>Retrofit</code> \u53EA\u80FD\u591F\u53CD\u5E8F\u5217\u5316 <code>Http</code> \u4F53\u4E3A <code>OkHttp</code> \u7684 <code>ResponseBody</code> \u7C7B\u578B\uFF0C\u5E76\u4E14\u53EA\u80FD\u591F\u63A5\u53D7 <code>ResponseBody</code> \u7C7B\u578B\u7684\u53C2\u6570\u4F5C\u4E3A <code>@body</code>\u3002</p><p>\u6DFB\u52A0\u8F6C\u6362\u5668\u53EF\u4EE5\u652F\u6301\u5176\u4ED6\u7684\u7C7B\u578B\uFF0C\u4E3A\u4E86\u65B9\u4FBF\u7684\u9002\u5E94\u6D41\u884C\u7684\u5E8F\u5217\u5316\u5E93\uFF0C<code>Retrofit</code> \u63D0\u4F9B\u4E86\u516D\u4E2A\u5144\u5F1F\u6A21\u5757\uFF1A</p>`,11),U={href:"https://github.com/google/gson",target:"_blank",rel:"noopener noreferrer"},P={href:"http://wiki.fasterxml.com/JacksonHome",target:"_blank",rel:"noopener noreferrer"},E={href:"https://github.com/square/moshi/",target:"_blank",rel:"noopener noreferrer"},S={href:"https://developers.google.com/protocol-buffers/",target:"_blank",rel:"noopener noreferrer"},H={href:"https://github.com/square/wire",target:"_blank",rel:"noopener noreferrer"},C={href:"http://simple.sourceforge.net/",target:"_blank",rel:"noopener noreferrer"},T=n("h3",{id:"\u81EA\u5B9A\u4E49\u8F6C\u6362\u5668",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u81EA\u5B9A\u4E49\u8F6C\u6362\u5668","aria-hidden":"true"},"#"),a(" \u81EA\u5B9A\u4E49\u8F6C\u6362\u5668")],-1),G=n("code",null,"Retrofit",-1),L=n("code",null,"YAML",-1),A=n("code",null,"txt",-1),J=n("code",null,"API",-1),B={href:"https://github.com/square/retrofit/blob/master/retrofit/src/main/java/retrofit/Converter.java",target:"_blank",rel:"noopener noreferrer"},I=n("code",null,"Retrofit",-1),O=t(`<div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token class-name">Retrofit</span> retrofit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Retrofit<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span>BASE_URL<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addCallAdapterFactory</span><span class="token punctuation">(</span><span class="token class-name">RxJavaCallAdapterFactory</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// \u4F7F\u7528RxJava\u4F5C\u4E3A\u56DE\u8C03\u9002\u914D\u5668</span>
        <span class="token punctuation">.</span><span class="token function">addConverterFactory</span><span class="token punctuation">(</span><span class="token class-name">GsonConverterFactory</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// \u4F7F\u7528Gson\u4F5C\u4E3A\u6570\u636E\u8F6C\u6362\u5668</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528 [RxJava](https://github.com/ReactiveX/RxJava\u548C <code>Gson</code> \u8F6C\u6362\u5668\u9700\u8981\u6DFB\u52A0\u4F9D\u8D56\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Retrofit\u9002\u914DRxJava</span>
compile &#39;com<span class="token punctuation">.</span>squareup<span class="token punctuation">.</span>retrofit<span class="token operator">:</span>adapter<span class="token operator">-</span>rxjava<span class="token operator">:</span><span class="token number">2.0</span><span class="token number">.0</span><span class="token operator">-</span>beta1&#39;
<span class="token comment">// Retrofit Gson\u6570\u636E\u8F6C\u6362\u5668</span>
compile &#39;com<span class="token punctuation">.</span>squareup<span class="token punctuation">.</span>retrofit<span class="token operator">:</span>converter<span class="token operator">-</span>gson<span class="token operator">:</span><span class="token number">2.0</span><span class="token number">.0</span><span class="token operator">-</span>beta1&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u914D\u5408-rxjava-\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u914D\u5408-rxjava-\u4F7F\u7528" aria-hidden="true">#</a> \u914D\u5408 RxJava \u4F7F\u7528</h2><p>\u5728 <code>Rxjava</code> \u4E0B\uFF0C\u4F60\u53EF\u4EE5\u7528 <code>Observable</code> \u5B9A\u4E49\u5F02\u6B65\u51FD\u6570\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GET</span><span class="token punctuation">(</span><span class="token string">&quot;user/{id}/photo&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">Observable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Photo</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserPhoto</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Path</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u73B0\u5728\u4F60\u53EF\u4EE5\u505A\u5F88\u591A\u4E8B\u60C5\uFF0C\u4E0D\u5149\u53EF\u4EE5\u83B7\u53D6\u6570\u636E\u8FD8\u53EF\u4EE5\u6539\u53D8\u6570\u636E\u3002</p><p><code>Retrofit</code> \u652F\u6301 <code>Observable</code> \u5BFC\u81F4\u4E86\u5C06\u591A\u4E2A <code>REST</code> \u8C03\u7528\u7EC4\u5408\u5728\u4E00\u8D77\u53D8\u5F97\u7B80\u5355\u4E86\u3002\u4F8B\u5982\uFF0C\u6211\u4EEC\u6709\u4E00\u4E2A\u8C03\u7528\u53BB\u83B7\u53D6\u7167\u7247\uFF0C\u7B2C\u4E8C\u4E2A\u8C03\u7528\u53BB\u83B7\u53D6\u539F\u751F\u6570\u636E\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u7ED3\u679C\u4E00\u8D77\u6253\u5305\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">zip</span><span class="token punctuation">(</span>
    service<span class="token punctuation">.</span><span class="token function">getUserPhoto</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
    service<span class="token punctuation">.</span><span class="token function">getPhotoMetadata</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>photo<span class="token punctuation">,</span> metadata<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">createPhotoWithData</span><span class="token punctuation">(</span>photo<span class="token punctuation">,</span> metadata<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>photoWithData <span class="token operator">-&gt;</span> <span class="token function">showPhoto</span><span class="token punctuation">(</span>photoWithData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u901A\u8FC7 <code>RxJava</code> + <code>Retrofit</code> \u53EF\u4EE5\u8BA9\u591A\u4E2A <code>REST</code> \u8C03\u7528\u7EC4\u5408\u6210\u4E00\u4E2A\u53D8\u5F97\u66F4\u7B80\u5355\u3002</p>`,10),M={href:"https://github.com/ReactiveX/RxJava",target:"_blank",rel:"noopener noreferrer"},z={href:"https://github.com/ReactiveX/RxAndroid",target:"_blank",rel:"noopener noreferrer"},F=n("h4",{id:"rxjava-\u6559\u7A0B",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#rxjava-\u6559\u7A0B","aria-hidden":"true"},"#"),a(" RxJava \u6559\u7A0B")],-1),D={href:"http://gank.io/post/560e15be2dca930e00da1083#toc_12",target:"_blank",rel:"noopener noreferrer"},V={href:"http://blog.csdn.net/lzyzsd/article/details/41833541",target:"_blank",rel:"noopener noreferrer"},W={href:"http://blog.csdn.net/lzyzsd/article/details/44094895",target:"_blank",rel:"noopener noreferrer"},N={href:"http://blog.csdn.net/lzyzsd/article/details/44891933",target:"_blank",rel:"noopener noreferrer"},X={href:"http://blog.csdn.net/lzyzsd/article/details/45033611",target:"_blank",rel:"noopener noreferrer"},Q=t(`<h2 id="retrofit-\u4EE3\u7801\u6DF7\u6DC6\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#retrofit-\u4EE3\u7801\u6DF7\u6DC6\u914D\u7F6E" aria-hidden="true">#</a> Retrofit \u4EE3\u7801\u6DF7\u6DC6\u914D\u7F6E</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>-dontwarn retrofit.**
-keep class retrofit.** { *; }
-keepattributes Signature
-keepattributes Exceptions
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2);function Y(K,Z){const s=i("ExternalLinkIcon");return p(),c("div",null,[n("p",null,[n("a",u,[a("Retrofit2.0 \u9879\u76EE\u4E3B\u9875"),e(s)])]),n("p",null,[n("a",r,[a("Retrofit2.0 \u5B98\u65B9\u6587\u6863"),e(s)])]),d,n("p",null,[k,a(" \u662F\u7531"),n("a",v,[a("Square\u516C\u53F8"),e(s)]),a("\u51FA\u54C1\u7684\u9488\u5BF9\u4E8E "),m,a(" \u548C "),h,a(" \u7684\u7C7B\u578B\u5B89\u5168\u7684 "),g,a(" \u5BA2\u6237\u7AEF\uFF0C\u7F51\u7EDC\u670D\u52A1\u57FA\u4E8E"),n("a",b,[a("OkHttp"),e(s)]),a(" \u3002")]),n("p",null,[n("a",f,[a("Retrofit2.0: \u6709\u53F2\u4EE5\u6765\u6700\u5927\u7684\u6539\u8FDB"),e(s)])]),_,n("p",null,[n("a",q,[a("\u4E0B\u8F7D v2.0.0-beta2 JAR"),e(s)])]),x,n("p",null,[a("\u4F7F\u7528"),n("a",R,[a("OkHttp\u62E6\u622A\u5668"),e(s)]),a("\u53EF\u4EE5\u6307\u5B9A\u9700\u8981\u7684 "),j,a(" \u7ED9\u6BCF\u4E00\u4E2A "),y,a(" \u8BF7\u6C42\u3002")]),w,n("ul",null,[n("li",null,[n("a",U,[a("Gson"),e(s)]),a(" : com.squareup.retrofit:converter-gson")]),n("li",null,[n("a",P,[a("Jackson"),e(s)]),a(": com.squareup.retrofit:converter-jackson")]),n("li",null,[n("a",E,[a("Moshi"),e(s)]),a(": com.squareup.retrofit:converter-moshi")]),n("li",null,[n("a",S,[a("Protobuf"),e(s)]),a(": com.squareup.retrofit:converter-protobuf")]),n("li",null,[n("a",H,[a("Wire"),e(s)]),a(": com.squareup.retrofit:converter-wire")]),n("li",null,[n("a",C,[a("Simple XML"),e(s)]),a(": com.squareup.retrofit:converter-simplexml")])]),T,n("p",null,[a("\u5982\u679C\u9700\u8981\u4F7F\u7528 "),G,a(" \u4E0D\u652F\u6301\u5F00\u7BB1\u5373\u7528\u7684\u5185\u5BB9\u683C\u5F0F(\u5982"),L,a("\u3001"),A,a("\u3001\u81EA\u5B9A\u4E49\u683C\u5F0F)\u548C "),J,a(" \u8FDB\u884C\u901A\u4FE1\uFF0C\u6216\u8005\u60F3\u8981\u4F7F\u7528\u4E0D\u540C\u7684\u5E93\u5B9E\u73B0\u5DF2\u7ECF\u5B58\u5728\u7684\u683C\u5F0F\uFF0C\u4F60\u53EF\u4EE5\u5F88\u65B9\u4FBF\u7684\u521B\u5EFA\u81EA\u5DF1\u7684\u8F6C\u6362\u5668\u3002\u521B\u5EFA\u65B9\u5F0F\uFF1A\u65B0\u5EFA\u4E00\u4E2A\u7C7B\u7EE7\u627F"),n("a",B,[a("Converter.Factory"),e(s)]),a("\u7C7B\uFF0C\u5E76\u5728\u6784\u5EFA "),I,a(" \u5B9E\u4F8B\u65F6\u4F20\u5165\u8F6C\u6362\u5668\u5B9E\u4F8B\u3002")]),O,n("p",null,[n("a",M,[a("RxJava\u9879\u76EE\u4E3B\u9875"),e(s)])]),n("p",null,[n("a",z,[a("RxAndroid\u9879\u76EE\u4E3B\u9875"),e(s)])]),F,n("ul",null,[n("li",null,[n("a",D,[a("\u7ED9 Android \u5F00\u53D1\u8005\u7684 RxJava \u8BE6\u89E3"),e(s)])]),n("li",null,[n("a",V,[a("\u6DF1\u5165\u6D45\u51FARxJava\uFF08\u4E00\uFF1A\u57FA\u7840\u7BC7\uFF09"),e(s)])]),n("li",null,[n("a",W,[a("\u6DF1\u5165\u6D45\u51FARxJava(\u4E8C\uFF1A\u64CD\u4F5C\u7B26)"),e(s)])]),n("li",null,[n("a",N,[a("\u6DF1\u5165\u6D45\u51FARxJava\u4E09--\u54CD\u5E94\u5F0F\u7684\u597D\u5904"),e(s)])]),n("li",null,[n("a",X,[a("\u6DF1\u5165\u6D45\u51FARxJava\u56DB-\u5728Android\u4E2D\u4F7F\u7528\u54CD\u5E94\u5F0F\u7F16\u7A0B"),e(s)])])]),Q])}const nn=o(l,[["render",Y],["__file","Retrofit2.0 \u4F7F\u7528\u8BE6\u89E3.html.vue"]]);export{nn as default};
