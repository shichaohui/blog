import{_ as n,o as s,c as a,a as t}from"./app.5e319a5d.js";const p={},e=t(`<p>\u7EE7\u627F <code>View</code> \u5B9E\u73B0\u7684\u4E00\u4E2A\u522E\u522E\u5361\u6548\u679C\u7684\u63A7\u4EF6\u3002</p><p><strong>\u4F7F\u7528\u65B9\u6CD5\uFF1A</strong></p><ul><li>\u548C\u666E\u901A\u63A7\u4EF6\u7684\u4F7F\u7528\u65B9\u6CD5\u4E00\u6837\u5B9E\u4F8B\u5316\u8FD9\u4E2A <code>View</code>\uFF1B</li><li>\u4F7F\u7528 <code>setCardContent()</code> \u65B9\u6CD5\u8BBE\u7F6E\u8BBE\u7F6E\u5361\u7247\u5E95\u5C42\u7684\u56FE\u7247\u548C\u9876\u5C42\u7684\u906E\u7F69\u56FE\u7247\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>Bitmap</code> \u5B9E\u4F8B\u548C\u8D44\u6E90 id \u4E24\u79CD\u65B9\u5F0F\u8BBE\u7F6E\uFF1B</li><li>\u4F7F\u7528 <code>setComplate()</code> \u65B9\u6CD5\u8BBE\u7F6E\u522E\u6389\u591A\u5C11\u540E\u81EA\u52A8\u6E05\u7406\u5269\u4F59\u7684\u906E\u7F69\uFF08\u53EF\u9009\uFF09\u3002</li></ul><p>\u5982\u679C\u5E95\u5C42\u4E0D\u60F3\u4F7F\u7528\u56FE\u7247\u60F3\u7528\u6587\u672C\uFF0C\u628A\u5BF9\u5E94\u7684 <code>Bitmap</code> \u6539\u6210\u6587\u672C\u6216\u8005\u6DFB\u52A0\u4E00\u4E2A\u8BBE\u7F6E\u6587\u672C\u7684\u65B9\u6CD5\uFF0C\u5E76\u4FEE\u6539 <code>onDraw()</code> \u65B9\u6CD5\u5373\u53EF\u3002</p><p>\u4EE3\u7801\u6CE8\u91CA\u5F88\u591A\uFF0C\u5F88\u5BB9\u6613\u770B\u660E\u767D</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">Context</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">Bitmap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">Bitmap</span><span class="token punctuation">.</span><span class="token class-name">Config</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">BitmapFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">Canvas</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">Paint</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">Path</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">PorterDuff</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">PorterDuffXfermode</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">Rect</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">AttributeSet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Log</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">MotionEvent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ScratchcardView</span> <span class="token keyword">extends</span> <span class="token class-name">View</span> <span class="token punctuation">{</span>

	<span class="token doc-comment comment">/** \u753B\u8DEF\u5F84\u7684\u753B\u7B14 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Paint</span> scratchPaint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Paint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token doc-comment comment">/** \u522E\u7684\u8DEF\u5F84\uFF08\u901A\u8FC7\u624B\u6307\u6ED1\u52A8\u4EA7\u751F\uFF09 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Path</span> scratchPath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token doc-comment comment">/** \u753B\u906E\u7F69\u5C42\u7684\u753B\u5E03 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Canvas</span> scratchCanvas<span class="token punctuation">;</span>
	<span class="token doc-comment comment">/** \u4FDD\u5B58\u88AB\u522E\u65F6\u5269\u4F59\u90E8\u5206\u7684\u906E\u7F69 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Bitmap</span> scratchBitmap<span class="token punctuation">;</span>

	<span class="token doc-comment comment">/** \u4E00\u4E2A\u8DDF\u5F53\u524DView\u4E00\u6837\u5927\u5C0F\u7684\u77E9\u5F62 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Rect</span> mRect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

	<span class="token doc-comment comment">/** \u662F\u5426\u522E\u5B8C\u7684\u6807\u8BC6 */</span>
	<span class="token keyword">private</span> <span class="token keyword">boolean</span> isComplete<span class="token punctuation">;</span>
	<span class="token doc-comment comment">/** \u522E\u6389\u591A\u5C11\u540E\u7B97\u5B8C\u6210\uFF080-100\uFF09 */</span>
	<span class="token keyword">private</span> <span class="token keyword">int</span> complate <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

	<span class="token keyword">private</span> <span class="token class-name">Context</span> mContext <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

	<span class="token doc-comment comment">/** \u5F53\u524DView\u7684\u5BBD\u5EA6 */</span>
	<span class="token keyword">private</span> <span class="token keyword">int</span> width <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token doc-comment comment">/** \u5F53\u524DView\u7684\u9AD8\u5EA6 */</span>
	<span class="token keyword">private</span> <span class="token keyword">int</span> height <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token doc-comment comment">/** \u5361\u7247\u5E95\u5C42\u9690\u85CF\u7684\u56FE\u7247 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Bitmap</span> bmpSecret <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token doc-comment comment">/** \u4F5C\u4E3A\u906E\u7F69\u7684\u56FE\u7247 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Bitmap</span> bmpScratch <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">ScratchcardView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">ScratchcardView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">AttributeSet</span> attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">ScratchcardView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">AttributeSet</span> attrs<span class="token punctuation">,</span> <span class="token keyword">int</span> defStyleAttr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> defStyleAttr<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>mContext <span class="token operator">=</span> context<span class="token punctuation">;</span>
		<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		scratchPaint<span class="token punctuation">.</span><span class="token function">setAntiAlias</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u8BBE\u7F6E\u753B\u7B14\u4E0D\u586B\u5145</span>
		scratchPaint<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span><span class="token class-name">Paint<span class="token punctuation">.</span>Style</span><span class="token punctuation">.</span>STROKE<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u8BBE\u7F6E\u5706\u89D2</span>
		scratchPaint<span class="token punctuation">.</span><span class="token function">setStrokeJoin</span><span class="token punctuation">(</span><span class="token class-name">Paint<span class="token punctuation">.</span>Join</span><span class="token punctuation">.</span>ROUND<span class="token punctuation">)</span><span class="token punctuation">;</span>
		scratchPaint<span class="token punctuation">.</span><span class="token function">setStrokeCap</span><span class="token punctuation">(</span><span class="token class-name">Paint<span class="token punctuation">.</span>Cap</span><span class="token punctuation">.</span>ROUND<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u7ED8\u5236\u65F6\u53D6\u4E0B\u5C42\u548C\u672C\u5C42\u7ED8\u5236\u7684\u975E\u4EA4\u96C6\u90E8\u5206</span>
		scratchPaint<span class="token punctuation">.</span><span class="token function">setXfermode</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PorterDuffXfermode</span><span class="token punctuation">(</span><span class="token class-name">PorterDuff<span class="token punctuation">.</span>Mode</span><span class="token punctuation">.</span>DST_OUT<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u8BBE\u7F6E\u753B\u7B14\u5BBD\u5EA6</span>
		scratchPaint<span class="token punctuation">.</span><span class="token function">setStrokeWidth</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		scratchPath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token annotation punctuation">@Override</span>
			<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				width <span class="token operator">=</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				height <span class="token operator">=</span> <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				mRect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// \u521D\u59CB\u5316\u4E00\u4E2Abitmap\u4FDD\u5B58\u88AB\u522E\u65F6\u5269\u4F59\u90E8\u5206\u7684\u906E\u7F69</span>
				scratchBitmap <span class="token operator">=</span> <span class="token class-name">Bitmap</span><span class="token punctuation">.</span><span class="token function">createBitmap</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> <span class="token class-name">Config</span><span class="token punctuation">.</span>ARGB_8888<span class="token punctuation">)</span><span class="token punctuation">;</span>
				scratchCanvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Canvas</span><span class="token punctuation">(</span>scratchBitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>
				scratchCanvas<span class="token punctuation">.</span><span class="token function">drawBitmap</span><span class="token punctuation">(</span>bmpScratch<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> mRect<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * \u8BBE\u7F6E\u522E\u522E\u5361\u7684\u5185\u5BB9
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">secretContent</span>
	 *            \u5E95\u5C42\u4FDD\u5BC6\u7684\u56FE\u7247
	 * <span class="token keyword">@param</span> <span class="token parameter">scratchContent</span>
	 *            \u9876\u5C42\u7684\u906E\u7F69\u56FE\u7247
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCardContent</span><span class="token punctuation">(</span><span class="token class-name">Bitmap</span> secretContent<span class="token punctuation">,</span> <span class="token class-name">Bitmap</span> scratchContent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>bmpSecret <span class="token operator">=</span> secretContent<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>bmpScratch <span class="token operator">=</span> scratchContent<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * \u8BBE\u7F6E\u522E\u522E\u5361\u7684\u5185\u5BB9
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">secretId</span>
	 *            \u5E95\u5C42\u4FDD\u5BC6\u7684\u56FE\u7247id
	 * <span class="token keyword">@param</span> <span class="token parameter">scratchId</span>
	 *            \u9876\u5C42\u7684\u906E\u7F69\u56FE\u7247\u7684id
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCardContent</span><span class="token punctuation">(</span><span class="token keyword">int</span> secretId<span class="token punctuation">,</span> <span class="token keyword">int</span> scratchId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		bmpSecret <span class="token operator">=</span> <span class="token class-name">BitmapFactory</span><span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span>mContext<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				secretId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		bmpScratch <span class="token operator">=</span> <span class="token class-name">BitmapFactory</span><span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span>mContext<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				scratchId<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * \u8BBE\u7F6E\u522E\u6389\u591A\u5C11\u540E\u81EA\u52A8\u6E05\u7406\u5269\u4F59\u7684\u906E\u7F69
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">complate</span>
	 *            \u5DF2\u6E05\u7406\u7684\u767E\u5206\u6BD4\uFF080-100\uFF09\uFF0C\u9ED8\u8BA4100
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setComplate</span><span class="token punctuation">(</span><span class="token keyword">int</span> complate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>complate <span class="token operator">=</span> complate<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onDraw</span><span class="token punctuation">(</span><span class="token class-name">Canvas</span> canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		canvas<span class="token punctuation">.</span><span class="token function">drawBitmap</span><span class="token punctuation">(</span>bmpSecret<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> mRect<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isComplete<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			scratchCanvas<span class="token punctuation">.</span><span class="token function">drawPath</span><span class="token punctuation">(</span>scratchPath<span class="token punctuation">,</span> scratchPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>
			canvas<span class="token punctuation">.</span><span class="token function">drawBitmap</span><span class="token punctuation">(</span>scratchBitmap<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onTouchEvent</span><span class="token punctuation">(</span><span class="token class-name">MotionEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">float</span> x <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">float</span> y <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">switch</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> <span class="token class-name">MotionEvent</span><span class="token punctuation">.</span>ACTION_DOWN<span class="token operator">:</span>
			scratchPath<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token class-name">MotionEvent</span><span class="token punctuation">.</span>ACTION_MOVE<span class="token operator">:</span>
			scratchPath<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token class-name">MotionEvent</span><span class="token punctuation">.</span>ACTION_UP<span class="token operator">:</span>
			<span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>mRunnable<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * \u7EDF\u8BA1\u64E6\u9664\u533A\u57DF\u4EFB\u52A1
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Runnable</span> mRunnable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> mPixels<span class="token punctuation">;</span>

		<span class="token annotation punctuation">@Override</span>
		<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// \u5DF2\u6E05\u7406\u7684\u533A\u57DF\u7684\u9762\u79EF</span>
			<span class="token keyword">int</span> wipeArea <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token comment">// \u603B\u9762\u79EF</span>
			<span class="token keyword">int</span> totalArea <span class="token operator">=</span> width <span class="token operator">*</span> height<span class="token punctuation">;</span>

			mPixels <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>totalArea<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// \u62FF\u5230\u6240\u6709\u7684\u50CF\u7D20\u4FE1\u606F</span>
			scratchBitmap<span class="token punctuation">.</span><span class="token function">getPixels</span><span class="token punctuation">(</span>mPixels<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// \u904D\u5386\u7EDF\u8BA1\u64E6\u9664\u7684\u533A\u57DF</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> width<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> height<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">int</span> index <span class="token operator">=</span> i <span class="token operator">+</span> j <span class="token operator">*</span> width<span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>mPixels<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						wipeArea<span class="token operator">++</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// \u6839\u636E\u6240\u5360\u767E\u5206\u6BD4\uFF0C\u8FDB\u884C\u4E00\u4E9B\u64CD\u4F5C</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>wipeArea <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> totalArea <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">int</span> percent <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>wipeArea <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">/</span> totalArea<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>percent <span class="token operator">&gt;</span> complate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;TAG&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6E05\u9664\u533A\u57DF\u8FBE\u5230&quot;</span> <span class="token operator">+</span> complate <span class="token operator">+</span> <span class="token string">&quot;%\uFF0C\u4E0B\u9762\u81EA\u52A8\u6E05\u9664&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					isComplete <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token function">postInvalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),c=[e];function o(l,i){return s(),a("div",null,c)}var k=n(p,[["render",o],["__file","Android \u81EA\u5B9A\u4E49 View \u5B9E\u73B0\u522E\u522E\u5361\u6548\u679C.html.vue"]]);export{k as default};
